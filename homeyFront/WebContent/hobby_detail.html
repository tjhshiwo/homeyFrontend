<!DOCTYPE html>
<html lang="en">
<head>
<!-- Title -->
<title>Homey - hobby</title>

<!-- Required Meta Tags Always Come First -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">

<!-- Favicon -->
<link rel="shortcut icon" href="../../favicon.ico">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Caveat+Brush|Courgette|Merienda+One" rel="stylesheet">

<!-- CSS Global Compulsory -->
<link rel="stylesheet" href="unify/vendor/bootstrap/bootstrap.min.css">

<!-- CSS Implementing Plugins -->
<link rel="stylesheet" href="unify/vendor/icon-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="unify/vendor/icon-line-pro/style.css">
<link rel="stylesheet" href="unify/vendor/icon-line/css/simple-line-icons.css">
<link rel="stylesheet" href="unify/vendor/icon-hs/style.css">
<link rel="stylesheet" href="unify/vendor/animate.css">
<link rel="stylesheet" href="unify/vendor/dzsparallaxer/dzsparallaxer.css">
<link rel="stylesheet" href="unify/vendor/dzsparallaxer/dzsscroller/scroller.css">
<link rel="stylesheet" href="unify/vendor/dzsparallaxer/advancedscroller/plugin.css">
<link rel="stylesheet" href="unify/vendor/cubeportfolio-full/cubeportfolio/css/cubeportfolio.min.css">
<link rel="stylesheet" href="unify/vendor/hs-megamenu/src/hs.megamenu.css">
<link rel="stylesheet" href="unify/vendor/hamburgers/hamburgers.min.css">

<!-- CSS Unify -->
<link rel="stylesheet" href="unify/css/unify.css">

<!-- CSS Customization -->
<link rel="stylesheet" href="unify/css/custom.css">

<!-- Angular JS  -->
<script type="text/javascript" src="js/angular-2.js"></script>
<script type="text/javascript" src="angular/hobbyAngular.js"></script>

<!-- W3C embed other html -->
<script src="https://www.w3schools.com/lib/w3.js"></script>
</head>

<body ng-app="myApp" ng-controller="getHobbyDetailCtrl">
	<main> <!-- Header --> <header id="js-header"
		class="u-header u-header--static--lg u-header--show-hide--lg u-header--change-appearance--lg" data-header-fix-moment="500"
		data-header-fix-effect="slide">
		<div class="u-header__section u-header__section--light g-bg-white g-transition-0_3 g-py-10"
			data-header-fix-moment-exclude="g-bg-white g-py-10" data-header-fix-moment-classes="g-bg-white-opacity-0_7 u-shadow-v18 g-py-0">
			<nav class="js-mega-menu navbar navbar-toggleable-md">
				<div class="container">
					<!-- Responsive Toggle Button -->
					<button class="navbar-toggler navbar-toggler-right btn g-line-height-1 g-brd-none g-pa-0 g-pos-abs g-right-0" type="button"
						aria-label="Toggle navigation" aria-expanded="false" aria-controls="navBar" data-toggle="collapse" data-target="#navBar">
						<span class="hamburger hamburger--slider">
							<span class="hamburger-box">
								<span class="hamburger-inner"></span>
							</span>
						</span>
					</button>
					<!-- End Responsive Toggle Button -->

					<!-- Logo -->
					<a class="navbar-brand g-font-weight-900 g-font-size-22 font-family-MeriendaOne" href="index.html">Homey</a>
					<!-- End Logo -->

					<!-- Navigation -->
					<div class="collapse navbar-collapse align-items-center flex-sm-row g-pt-10 g-pt-5--lg" id="navBar">
						<ul class="navbar-nav ml-auto text-uppercase g-font-weight-600 u-main-nav-v8 u-sub-menu-v1">
							<li class="nav-item  g-mx-2--md g-mx-5--xl g-mb-5 g-mb-0--lg">
								<a href="familyviolence.html" class="nav-link" id="nav-link-1">Family violence</a>
							</li>
							<li class="nav-item g-mx-2--md g-mx-5--xl g-mb-5 g-mb-0--lg">
								<a href="addiction.html" class="nav-link">Addiction</a>
							</li>
							<li class="nav-item g-mx-2--md g-mx-5--xl g-mb-5 g-mb-0--lg">
								<a href="financial.html" class="nav-link">Financial issue</a>
							</li>
							<li class="nav-item  active g-mx-2--md g-mx-5--xl g-mb-5 g-mb-0--lg">
								<a href="lonely.html" class="nav-link">Loneliness relief</a>
							</li>
						</ul>
					</div>
					<!-- End Navigation -->
				</div>
			</nav>
		</div>
	</header> <!-- End Header --> <!-- Section -->
	<section class="container g-pt-100 g-pb-40" ng-init="getHobbyDesc()">
		<div class="row">
			<div class="col-lg-6 g-mb-60">
				<div class="mb-4">
					<h2 class="h3 text-uppercase mb-3">{{hobbyDesc.title}}</h2>
					<div class="g-width-60 g-height-1 g-bg-black"></div>
				</div>
				<div class="mb-5">
					<p class="h5 g-font-weight-200 g-font-size-21">{{hobbyDesc.description}}.</p>
				</div>
			</div>

			<div class="col-lg-6 g-mb-60">
				<img class="img-fluid" ng-src='img/hobbyPotfolio/{{hobbyDesc.image}}' alt="Image Description">
			</div>
		</div>
	</section>
	<!-- End Section -->


	<section class="g-mx-15 g-mb-20">
		<div class="container" ng-init="getHobbyFromServer()">
			<div id="angularvalue" style="display: none">{{hobbyDetail.allAddress}}</div>
			<div class="row">
				<div class="col-sm-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<p>Places you can visit</p>
						</div>
						<div class="panel-body">
							<div id="gmap-basic-marker" style="height: 500px; width: 100%;"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Footer -->
	<div w3-include-html="layout/footer.html"></div>

	<a class="js-go-to u-go-to-v1" href="#" data-type="fixed"
		data-position='{
           "bottom": 15,
           "right": 15
         }' data-offset-top="400"
		data-compensation="#js-header" data-show-effect="zoomIn">
		<i class="hs-icon hs-icon-arrow-top"></i>
	</a> </main>

	<!-- JS Global Compulsory -->
	<script src="unify/vendor/jquery/jquery.min.js"></script>
	<script src="unify/vendor/jquery-migrate/jquery-migrate.min.js"></script>
	<script src="unify/vendor/tether.min.js"></script>
	<script src="unify/vendor/bootstrap/bootstrap.min.js"></script>

	<!-- JS Implementing Plugins -->
	<script src="unify/vendor/appear.js"></script>
	<script src="unify/vendor/hs-megamenu/src/hs.megamenu.js"></script>
	<script src="unify/vendor/dzsparallaxer/dzsparallaxer.js"></script>
	<script src="unify/vendor/dzsparallaxer/dzsscroller/scroller.js"></script>
	<script src="unify/vendor/dzsparallaxer/advancedscroller/plugin.js"></script>
	<script src="unify/vendor/cubeportfolio-full/cubeportfolio/js/jquery.cubeportfolio.min.js"></script>

	<!-- JS Unify -->
	<script src="unify/js/hs.core.js"></script>
	<script src="unify/js/components/hs.header.js"></script>
	<script src="unify/js/helpers/hs.hamburgers.js"></script>
	<script src="unify/js/components/hs.tabs.js"></script>
	<script src="unify/js/components/hs.counter.js"></script>
	<script src="unify/js/components/hs.cubeportfolio.js"></script>
	<script src="unify/js/components/hs.go-to.js"></script>

	<!-- JS Customization -->
	<script src="unify/js/custom.js"></script>

	<!-- JS Plugins Init. -->
	<!-- Replace the value of the key parameter with your own API key. -->
	<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBk4msAZURGdLH8Cw8fB_YxPmTBkvEQ0FE&callback=initMap"></script>

	<script>
		w3.includeHTML();

		// set locations to js variable
		window.onload = initMap;
		var addresses;
		var resultsMap;
		var geocoder;
		var popupWindow;

		var count = 0;

		function initMap() {
			addresses = document.getElementById('angularvalue').innerText;
			resultsMap = new google.maps.Map(document
					.getElementById('gmap-basic-marker'), {
				zoom : 10,
				center : {
					lat : -37.8136,
					lng : 144.9631
				}
			});
			findCurrentLocation();
			geocoder = new google.maps.Geocoder();
			if (addresses != null) {
				var addressesArray = addresses.split("^");
				for (i = 0; i < addressesArray.length; i++) {
					geocodeAddress(addressesArray[i]);
				}
			}
		}

		// potential issue: some marker may be rendered for more than once, still don't know why
		function geocodeAddress(address) {
			console.log("geo address: " + address);
			popupWindow = new google.maps.InfoWindow();
			geocoder
					.geocode(
							{
								'address' : address
							},
							function(results, status) {
								if (status === 'OK') {
									// locate the marker in center
									//resultsMap.setCenter(results[0].geometry.location);
									var marker = new google.maps.Marker({
										map : resultsMap,
										position : results[0].geometry.location
									//animation : google.maps.Animation.DROP
									});
									google.maps.event
											.addListener(
													marker,
													'click',
													(function(marker) {
														return function() {
															var content = address
																	+ "&nbsp;&nbsp;<a class='btn btn-sm  u-btn-outline-blue' href='https://maps.google.com/?q="
																	+ address
																	+ "' target='_blank'><i class='fa fa-location-arrow'></i> Come to us</a>"
															popupWindow
																	.setContent(content);
															popupWindow.open(
																	resultsMap,
																	marker);
														}
													})(marker, i));
								} else if (status === google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
									setTimeout(function() {
										//console.log(count++);
										geocodeAddress(address);
									}, 1000);
								} else {
									console
											.log("Geocode was not successful for the following reason:"
													+ status);
								}
							});
		}

		/*****************************************************
		 * find current location
		 */
		function findCurrentLocation() {
			// Try HTML5 geolocation.
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(function(position) {
					var pos = {
						lat : position.coords.latitude,
						lng : position.coords.longitude
					};
					resultsMap.setCenter(pos);
					var Marker = new google.maps.Marker({
						map : resultsMap,
						animation : google.maps.Animation.DROP,
						position : pos,
						icon : "img/indicator.png"
					});
				}, function() {
					handleLocationError(true, infoWindow, resultsMap
							.getCenter());
				});
			} else {
				// Browser doesn't support Geolocation
				handleLocationError(false, infoWindow, resultsMap.getCenter());
			}

		}
		$(document).on(
				'ready',
				function() {
					// initialization of go to
					$.HSCore.components.HSGoTo.init('.js-go-to');

					// initialization of tabs
					$.HSCore.components.HSTabs.init('[role="tablist"]');

					// initialization of counters
					var counters = $.HSCore.components.HSCounter
							.init('[class*="js-counter"]');
				});

		$(window).on('load', function() {
			// initialization of header
			$.HSCore.components.HSHeader.init($('#js-header'));
			$.HSCore.helpers.HSHamburgers.init('.hamburger');

			// initialization of HSMegaMenu component
			$('.js-mega-menu').HSMegaMenu({
				event : 'hover',
				pageContainer : $('.container'),
				breakpoint : 991
			});

			// initialization of cubeportfolio
			$.HSCore.components.HSCubeportfolio.init('.cbp');
		});

		$(window).on('resize', function() {
			setTimeout(function() {
				$.HSCore.components.HSTabs.init('[role="tablist"]');
			}, 200);
		});
	</script>
</body>
</html>
